<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../section-symbol/section-symbol.html">
<link rel="import" href="../tag-link/tag-link.html">
<link rel="import" href="../theme-color/theme-color.html">
<link rel="import" href="../element-for-in/element-for-in.html">
<dom-module id="page-image">
    <link rel="import" type="css" href="../../styles/main.css">
    <template>
        <style>
        :host {
            background: #fafafa;
        }

        #content {
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
        }

        paper-material {
            padding: 0 20px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        </style>
        <paper-drawer-panel id="drawerPanel" responsive-width="900px" narrow="{{narrowMode}}" drawer-width="272px" disable-edge-swipe>
            <app-sidebar tag="[[tag]]" sections="{{sections}}" current="[[section.id]]" drawer></app-sidebar>
            <paper-header-panel id="container" mode="[[_getMode(narrowMode)]]" view$="[[_actualView(view)]]" main>
                <div class="paper-header">
                    <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
                    <h2 class="flex">
              {{image.name}}
              <template is="dom-if" if="{{image.star}}">
                <paper-icon-button on-tap="unstarthis" class="gold" icon="icons:star" title="image is starred and appears in machine creation"></paper-icon-button>
              </template>
              <template is="dom-if" if="{{!image.star}}">
                <paper-icon-button on-tap="starthis" icon="icons:star-border" title="image does not appear in machine creation"></paper-icon-button>
              </template>
            </h2>
                    <app-bar class="horizontal layout center end-justified" query="{{q}}"></app-bar>
                    <paper-icon-button icon="icons:sort"></paper-icon-button>
                    <app-user-menu email="[[model.email]]"></app-user-menu>
                </div>
                <div id="content">
                    <paper-card class="info-card" heading="Basic Info">
                        <div class="card-content">
                            <table class="info-table">
                                <tr>
                                    <td>
                                        Name
                                    </td>
                                    <td>
                                        [[image.name]]
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        ID
                                    </td>
                                    <td>
                                        [[image.id]]
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </paper-card>
                    <paper-card class="info-card" heading="Full Metadata List">
                        <div class="card-content">
                            <element-for-in content="[[image.extra]]"></element-for-in>
                        </div>
                    </paper-card>
                </div>
                <div class="absolute-bottom-right">
                    <app-fab></app-fab>
                </div>
            </paper-header-panel>
        </paper-drawer-panel>
    </template>
</dom-module>
<script>
Polymer({
    is: 'page-image',
    enableCustomStyleProperties: true,
    properties: {
        router: Object,
        pageTitle: {
            type: String
        },
        params: {
            type: Object,
            notify: true
        },
        sections: Array,
        section: {
            type: Object,
            notify: true,
            value: {}
        },
        tag: {
            type: String,
            value: ""
        },
        image: {
            type: Object,
            notify: true
        }
    },
    ready: function() {

    },
    attached: function() {

    },
    addMachine: function(_, params) {
        console.log("clicked Add Machine");
    },
    starthis: function() {
        this.set('image.star', true);
    },
    unstarthis: function() {
        this.set('image.star', false);
    },
    _getMode: function(narrow) {
        return narrow ? 'waterfall' : 'scroll';
    },
});
</script>
